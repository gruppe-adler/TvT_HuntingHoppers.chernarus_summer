params ["_texture", "_number"];

if (_number == "-1") then {
    _number == "";
};

// we assume rhs escalation is always loaded fully
/*
if (isClass (configFile >> "CfgPatches" >> "rhsusf_main")) then {

    _vehicle setVariable ["RHS_Decal_Number_Enabled", false, true];

    if (_vehicle isKindOf "rhs_tracked_base" ||
        _vehicle isKindOf "rhs_wheeled_base" ||
        _vehicle isKindOf "rhs_air_base") then {
      [_vehicle,
      [
        "Label",
        [1,2,3,4,5,6,7,8,9],
        "LicensePlate",
        [
            _texture
        ]
      ]] spawn rhs_fnc_decalsInit; // todo find right hidden selection on each vehicle
    };
};
*/
private _attributes = _vehicle getVariable ["gm_vehicle_attributes", []];


if (_vehicle isKindOf "gm_tracked_base" ||
    _vehicle isKindOf "gm_wheeled_base") then {

    // _vehicle setObjectTextureGlobal [27, _textureParsed];
    private _mergeString = format ["%1%2", _texture, _number];
    private _textureParsed = format ["gm_%1_%2_ca", _mergeString, GRAD_DYNGROUPDECALS_INSIGNIA_COLOR];
    (_attributes select 3) set [5,_textureParsed];
};

if (_vehicle isKindOf "gm_helicopter_base" ||
    _vehicle isKindOf "gm_plane_base") then {
    (_attributes select 0) set [0,"gm_ge_civ_wht"];
    private _mergeString = format ["%1  %2", _texture, _number];
    (_attributes select 0) set [1, _mergeString];
};

_vehicle setVariable ["gm_vehicle_attributes", _attributes, true];
[_vehicle] spawn gm_core_vehicles_fnc_vehicleMarkingsInit;